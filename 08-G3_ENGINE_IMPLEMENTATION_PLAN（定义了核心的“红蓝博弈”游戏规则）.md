# Ingenio G3 å¼•æ“ç»¼åˆå®æ–½æ–¹æ¡ˆ

**ç‰ˆæœ¬**: v1.0 (Final Draft)
**æ—¥æœŸ**: 2025-12-25
**æ ¸å¿ƒç†å¿µ**: æ¨¡ç‰ˆå¢å¼ºç”Ÿæˆ (Template-Augmented Generation) + çº¢è“æ”»é˜²åšå¼ˆ (Red-Blue Adversarial Loop)

---

## 1. æ ¸å¿ƒæ¶æ„ï¼šåŒæµèåˆ

æˆ‘ä»¬ä¸ä»é›¶ç”Ÿæˆæ‰€æœ‰ä»£ç ï¼Œè€Œæ˜¯è®© AI (G3) åœ¨â€œç¡®å®šæ€§æ¨¡ç‰ˆâ€çš„åŸºç¡€ä¸Šè¿›è¡Œâ€œåˆ›é€ æ€§ç¼åˆâ€ã€‚

| ç»´åº¦ | Java ä¾§ (JeecgBoot) | Python ä¾§ (AgentScope) |
| :--- | :--- | :--- |
| **è§’è‰²** | **éª¨æ¶ (Skeleton)** | **çµé­‚ (Soul)** |
| **ç”Ÿæˆæ–¹å¼** | **å¡«ç©ºå¼**ï¼šåŸºäº Controller/Service æ ‡å‡†æ¨¡ç‰ˆ | **åˆ›é€ å¼**ï¼šåŸºäº AgentScope æ¡†æ¶ç¼–å†™ä¸šåŠ¡é€»è¾‘ |
| **æ ¸å¿ƒèŒè´£** | é‰´æƒã€æŒä¹…åŒ–ã€è°ƒç”¨ç¬¬ä¸‰æ–¹èƒ½åŠ› (æ”¯ä»˜/ç”¨æˆ·) | æ¨ç†ã€å¤šè½®å¯¹è¯ã€å·¥å…·è°ƒç”¨ã€çŸ¥è¯†æ£€ç´¢ |
| **è¿æ¥æ–¹å¼** | è‡ªåŠ¨ç”Ÿæˆ `AgentClient` (HTTP RestTemplate) | è‡ªåŠ¨ç”Ÿæˆ `server.py` (FastAPI/Flask) |

---

## 2. G3 å¼•æ“å†…æ ¸ï¼šçº¢è“åšå¼ˆ (The Game)

G3 å¼•æ“ä¸å†æ˜¯ä¸€ä¸ªç®€å•çš„â€œç”Ÿæˆå™¨â€ï¼Œè€Œæ˜¯ä¸€ä¸ª**â€œè™šæ‹Ÿç ”å‘å›¢é˜Ÿâ€**çš„åšå¼ˆåœºã€‚

### è§’è‰²å®šä¹‰

*   **ğŸŸ¦ è“æ–¹ (Player Agent) - "å…¨æ ˆå·¥ç¨‹å¸ˆ"**
    *   **ï¿½ï¿½ï¿½è´£**ï¼šè¯»å–éœ€æ±‚å’Œæ¨¡ç‰ˆï¼Œç¼–å†™ Java å’Œ Python ä»£ç ã€‚
    *   **ç›®æ ‡**ï¼šå®ç°åŠŸèƒ½ï¼Œé€šè¿‡ç¼–è¯‘ï¼Œé€šè¿‡æµ‹è¯•ã€‚
    *   **å·¥å…·**ï¼š`backend/g3_context/` (èƒ½åŠ›æ³¨å†Œè¡¨, ä»£ç æ¨¡ç‰ˆ)ã€‚

*   **ğŸŸ¥ çº¢æ–¹ (Coach Agent) - "QA/é»‘å®¢"**
    *   **èŒè´£**ï¼š**ä¸å†™ä¸šåŠ¡ä»£ç ï¼Œåªå†™æµ‹è¯•ä»£ç **ã€‚
    *   **ç­–ç•¥**ï¼š
        *   **è¾¹ç•Œæ”»å‡»**ï¼šç”Ÿæˆç©ºå€¼ã€è¶…é•¿æ–‡æœ¬ã€éæ³•å­—ç¬¦ã€‚
        *   **é€»è¾‘æ”»å‡»**ï¼šæ¨¡æ‹Ÿ API è¶…æ—¶ã€æ•°æ®åº“æ–­è¿ã€‚
        *   **ä¸šåŠ¡æ”»å‡»**ï¼šæ¨¡æ‹Ÿæœªæˆæƒè®¿é—®ã€ç§¯åˆ†ä¸è¶³è°ƒç”¨ã€‚
    *   **äº§å‡º**ï¼š`test_attack.py` (é’ˆå¯¹ Agent) æˆ– `ServiceTest.java` (é’ˆå¯¹ Java)ã€‚

*   **âš–ï¸ è£åˆ¤ (Executor) - "ç‰©ç†å¼•æ“"**
    *   **èŒè´£**ï¼šåœ¨æ²™ç®±ä¸­è¿è¡Œæµ‹è¯•ã€‚
    *   **åˆ¤å®š**ï¼š
        *   æµ‹è¯•å¤±è´¥ -> âŒ çº¢æ–¹èƒœ -> æŠŠæŠ¥é”™æ—¥å¿—ç”©ç»™è“æ–¹ -> **è¿›å…¥ä¸‹ä¸€è½® Loop**ã€‚
        *   æµ‹è¯•é€šè¿‡ -> âœ… è“æ–¹èƒœ -> **ä»£ç äº¤ä»˜**ã€‚

---

## 3. å®æ–½è·¯å¾„ (Implementation Path)

### 3.1 é˜¶æ®µä¸€ï¼šæ„å»º G3 ä¸Šä¸‹æ–‡ (The Context)
*ç»™è“æ–¹æä¾›â€œç§¯æœ¨â€å’Œâ€œå›¾çº¸â€ã€‚*

- **ç›®å½•**: `backend/g3_context/`
- **æ–‡ä»¶**:
    - `capabilities.md`: å®šä¹‰ JeecgBoot ç°æœ‰èƒ½åŠ›ï¼ˆç”¨æˆ·ä¸­å¿ƒã€æ”¯ä»˜ä¸­å¿ƒã€æ¶ˆæ¯ä¸­å¿ƒï¼‰çš„ Java è°ƒç”¨å¥‘çº¦ã€‚
    - `templates/JavaController.txt`: æ ‡å‡† Result å°è£…çš„ Controller æ¨¡ç‰ˆã€‚
    - `templates/JavaService.txt`: å« Agent è°ƒç”¨æ’æ§½çš„ Service æ¨¡ç‰ˆã€‚
    - `templates/AgentScope.txt`: Python Agent çš„æ ‡å‡†ç»“æ„ã€‚

### 3.2 é˜¶æ®µäºŒï¼šå®ç° G3 å†…æ ¸ (The Engine)
*å®ç°åšå¼ˆæµç¨‹çš„è°ƒåº¦å™¨ã€‚*

- **ç›®å½•**: `frontend/src/lib/lab/`
- **æ–‡ä»¶**: `g3-engine.ts`
- **é€»è¾‘**:
    ```typescript
    while (round < MAX_ROUNDS) {
        // 1. è“æ–¹è¡ŒåŠ¨
        code = await Player.generate(requirement, context, last_errors);
        
        // 2. çº¢æ–¹è¡ŒåŠ¨ (å¯¹æŠ—æ€§ç”Ÿæˆ)
        attack_tests = await Coach.generateTests(code, requirement);
        
        // 3. è£åˆ¤è¡ŒåŠ¨
        result = await Executor.run(code, attack_tests);
        
        if (result.passed) return code; // äº¤ä»˜
        
        last_errors = result.logs; // è¿›å…¥ä¸‹ä¸€è½®ä¿®å¤
    }
    ```

### 3.3 é˜¶æ®µä¸‰ï¼šå‰ç«¯é›†æˆ (The Interface)
*è®©ç”¨æˆ·èƒ½è§¦å‘è¿™ä¸ªæµç¨‹ã€‚*

- **é¡µé¢**: `frontend/src/app/preview-quick/[requirement]/page.tsx`
- **äº¤äº’**:
    - å¢åŠ  **"ç”Ÿæˆå…¨æ ˆåº”ç”¨"** æŒ‰é’®ã€‚
    - å±•ç¤ºåšå¼ˆè¿‡ç¨‹æ—¥å¿—ï¼š
        > ğŸ”µ Player: ç”Ÿæˆäº†è®¢å•æœåŠ¡ä»£ç ...
        > ğŸ”´ Coach: æ­£åœ¨ç¼–å†™ SQL æ³¨å…¥æµ‹è¯•ç”¨ä¾‹...
        > ğŸ’¥ è£åˆ¤: æµ‹è¯•å¤±è´¥ï¼æ£€æµ‹åˆ°æœªæ ¡éªŒåº“å­˜...
        > ğŸ”µ Player: æ­£åœ¨ä¿®å¤åº“å­˜æ ¡éªŒé€»è¾‘...
        > âœ… è£åˆ¤: æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼

---

## 4. ä¸‹ä¸€æ­¥å…·ä½“ä»»åŠ¡ (Next Actions)

1.  **åˆ›å»ºä¸Šä¸‹æ–‡**: ç¼–å†™ `backend/g3_context/` ä¸‹çš„èƒ½åŠ›æè¿°å’Œæ¨¡ç‰ˆæ–‡ä»¶ã€‚
2.  **ç¼–å†™ Prompt**: åœ¨ `frontend/src/lib/g3/prompts/` ä¸‹ç¼–å†™åŒºåˆ†æ˜ç¡®çš„ Player (å»ºè®¾è€…) å’Œ Coach (æ”»å‡»è€…) æç¤ºè¯ã€‚
3.  **å¼€å‘å†…æ ¸**: å®ç° `g3-engine.ts` çš„è°ƒåº¦é€»è¾‘ã€‚

